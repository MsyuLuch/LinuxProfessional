# **–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Ññ1**

üîñ–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–ª—è –∫—É—Ä—Å–∞ [Administrator Linux.Professional](https://otus.ru/lessons/linux-professional/)

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã—Ö –≤ –º–µ—Ç–æ–¥–∏—á–∫–µ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Ç–∞–∫–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏, –∫–∞–∫ `Vagrant` –∏ `Packer`, –ø–æ–ª—É—á–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π (`Github`). –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≤—ã–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é —è–¥—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –æ—Å–Ω–æ–≤–∞–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ —á–µ—Ä–µ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `Vagrant Cloud`.

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

- **VirtualBox** - —Å—Ä–µ–¥–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏, –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã;
- **Vagrant** - –ü–û –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Ä–µ–¥—ã –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è *VirtualBox*; (https://www.vagrantup.com/downloads.html)
- **Packer** - –ü–û –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω; (https://www.packer.io/downloads.html)
- **Git** - —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π

–ê —Ç–∞–∫ –∂–µ –∞–∫–∫–∞—É–Ω—Ç—ã:

- **GitHub** - https://github.com/
- **Vagrant Cloud** - https://app.vagrantup.com

# **–¶–µ–ª—å**
 
–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ centos/7 —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —è–¥—Ä–æ–º –∏ –µ–≥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Vagrant Cloud.
 
# **–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**

–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç https://github.com/MsyuLuch/LinuxProfessional/tree/main/homework-1

–ó–¥–µ—Å—å:
- `readme.md` - –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è
- `Vagrantfile` - —Ñ–∞–π–ª –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è `Vagrant`

–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –≤ Vagrant Cloud https://app.vagrantup.com/MsyuLuch/boxes/centos-7-5

---
# **–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è ‚Ññ1**

# **1. Kernel update**

### **1.1 –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫**

–ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```
git clone https://github.com/dmitry-lyutenko/manual_kernel_update
```
–ó–¥–µ—Å—å:
- `manual` - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è
- `packer` - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –¥–ª—è `packer`'–∞
- `Vagrantfile` - —Ñ–∞–π–ª –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è `Vagrant`

–ó–∞–ø—É—Å–∫–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –∏ –ª–æ–≥–∏–Ω–∏–º—Å—è:
```
vagrant up
vagrant ssh
```

### **1.2 kernel update**

–ü–æ–¥–∫–ª—é—á–∞–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —è–¥—Ä–∞.
```
sudo yum install -y http://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm
```

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å –¥–≤–µ –≤–µ—Ä—Å–∏–∏ —è–¥–µ—Ä:
 - `kernel-ml` - –Ω–∞–∏–±–æ–ª–µ–µ —Å–≤–µ–∂–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è.
 - `kernel-lt` - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π, –Ω–æ –º–µ–Ω–µ–µ —Å–≤–µ–∂–∞—è, —á–µ–º –ø–µ—Ä–≤–∞—è.

–°—Ç–∞–≤–∏–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ —è–¥—Ä–æ:
```
sudo yum --enablerepo elrepo-kernel install kernel-ml -y
```

### **1.3 grub update**

–û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∑–∞–≥—Ä—É–∑—á–∏–∫–∞:
```
sudo grub2-mkconfig -o /boot/grub2/grub.cfg
```
–í—ã–±–∏—Ä–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å –Ω–æ–≤—ã–º —è–¥—Ä–æ–º –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é:
```
sudo grub2-set-default 0
```
–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É:
```
sudo reboot
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é —è–¥—Ä–∞:
```
uname -r
```

---

# **2. Packer**

### **2.1 packer build**
–°–æ–∑–¥–∞–µ–º —Å–≤–æ–π –æ–±—Ä–∞–∑ —Å–∏—Å—Ç–µ–º—ã, —Å —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã–º —è–¥—Ä–æ–º 5–π –≤–µ—Ä—Å–∏–∏.
–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `packer` –≤—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É:
```
packer build centos.json
```

### **2.2 vagrant init (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)**
–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞–∑ –≤ `vagrant`:
```
vagrant box add --name centos-7-5 centos-7.7.1908-kernel-5-x86_64-Minimal.box
```
–ü—Ä–æ–≤–µ—Ä–∏—è–µ–º –µ–≥–æ –≤ —Å–ø–∏—Å–∫–µ –∏–º–µ—é—â–∏—Ö—Å—è –æ–±—Ä–∞–∑–æ–≤:
```
vagrant box list
centos-7-5            (virtualbox, 0)
```
–°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π Vagrantfile, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ—é—â–∏–π—Å—è. 
```
vagrant init centos-7-5
```
–ó–∞–ø—É—Å–∫–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É, –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –Ω–µ–π –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é —è–¥—Ä–∞:

```
vagrant up
vagrant ssh    
uname -r
```
–£–¥–∞–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:
```
vagrant box remove centos-7-5
```
---
# **3. Vagrant cloud**

–õ–æ–≥–∏–Ω–∏–º—Å—è –≤ `vagrant cloud`:
```
vagrant cloud auth login
Vagrant Cloud username or email: <user_email>
Password (will be hidden): 
Token description (Defaults to "Vagrant login from DS-WS"):
You are now logged in.
```
–ü—É–±–ª–∏–∫—É–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –±–æ–∫—Å:
```
vagrant cloud publish --release <username>/centos-7-5 1.0 virtualbox \
        centos-7.7.1908-kernel-5-x86_64-Minimal.box
```
–ó–¥–µ—Å—å:
 - `cloud publish` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—Ä–∞–∑ –≤ –æ–±–ª–∞–∫–æ;
 - `release` - —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ–±—Ä–∞–∑–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏;
 - `<username>/centos-7-5` - `username`, —É–∫–∞–∑–∞–Ω—ã–π –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –∏–º—è –æ–±—Ä–∞–∑–∞;
 - `1.0` - –≤–µ—Ä—Å–∏—è –æ–±—Ä–∞–∑–∞;
 - `virtualbox` - –ø—Ä–æ–≤–∞–π–¥–µ—Ä;
 - `centos-7.7.1908-kernel-5-x86_64-Minimal.box` - –∏–º—è —Ñ–∞–π–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ –æ–±—Ä–∞–∑–∞;
