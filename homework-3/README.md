# **–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Ññ3**

üîñ–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–ª—è –∫—É—Ä—Å–∞ [Administrator Linux.Professional](https://otus.ru/lessons/linux-professional/)

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

- **VirtualBox** - —Å—Ä–µ–¥–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏, –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã;
- **Vagrant** - –ü–û –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Ä–µ–¥—ã –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è *VirtualBox*; (https://www.vagrantup.com/downloads.html);

# **–¶–µ–ª—å**
 
–†–∞–±–æ—Ç–∞ —Å LVM
 
–ù–∞ –∏–º–µ—é—â–µ–º—Å—è –æ–±—Ä–∞–∑–µ (centos/7 1804.2) https://gitlab.com/otus_linux/stands-03-lvm

`/dev/mapper/VolGroup00-LogVol00 38G 738M 37G 2% /`

- —É–º–µ–Ω—å—à–∏—Ç—å —Ç–æ–º –ø–æ–¥ / –¥–æ 8G
- –≤—ã–¥–µ–ª–∏—Ç—å —Ç–æ–º –ø–æ–¥ /home
- –≤—ã–¥–µ–ª–∏—Ç—å —Ç–æ–º –ø–æ–¥ /var (/var - —Å–¥–µ–ª–∞—Ç—å –≤ mirror)
- –¥–ª—è /home - —Å–¥–µ–ª–∞—Ç—å —Ç–æ–º –¥–ª—è —Å–Ω—ç–ø—à–æ—Ç–æ–≤
- –ø—Ä–æ–ø–∏—Å–∞—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ fstab (–ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏ –∏ —Ä–∞–∑–Ω—ã–º–∏ —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –Ω–∞ –≤—ã–±–æ—Ä)

–†–∞–±–æ—Ç–∞ —Å–æ —Å–Ω–∞–ø—à–æ—Ç–∞–º–∏:
- —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ /home/
- —Å–Ω—è—Ç—å —Å–Ω–∞–ø—à–æ—Ç
- —É–¥–∞–ª–∏—Ç—å —á–∞—Å—Ç—å —Ñ–∞–π–ª–æ–≤
- –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —Å–æ —Å–Ω–∞–ø—à–æ—Ç–∞

–ó–∞–ª–æ–≥–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –º–æ–∂–Ω–æ —É—Ç–∏–ª–∏—Ç–æ–π script, —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏ –∏ —Ç.–ø.

# **–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**

–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç https://github.com/MsyuLuch/LinuxProfessional/tree/main/homework-3

–ó–¥–µ—Å—å:
- `readme.md` - –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è
- `Vagrantfile` - —Ñ–∞–π–ª –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è `Vagrant`
- `history_log.txt` - log —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏

---
# **–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è ‚Ññ3**

***–£–º–µ–Ω—å—à–∏—Ç—å —Ç–æ–º –ø–æ–¥ / –¥–æ 8G***

–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
```
#lsblk
NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                       8:0    0   40G  0 disk 
‚îú‚îÄsda1                    8:1    0    1M  0 part 
‚îú‚îÄsda2                    8:2    0    1G  0 part /boot
‚îî‚îÄsda3                    8:3    0   39G  0 part 
  ‚îú‚îÄVolGroup00-LogVol00 253:0    0 37.5G  0 lvm  /
  ‚îî‚îÄVolGroup00-LogVol01 253:1    0  1.5G  0 lvm  [SWAP]
sdb                       8:16   0   10G  0 disk 
sdc                       8:32   0    2G  0 disk 
sdd                       8:48   0    1G  0 disk 
sde                       8:64   0    1G  0 disk 
# df -hT
Filesystem                      Type      Size  Used Avail Use% Mounted on
devtmpfs                        devtmpfs  110M     0  110M   0% /dev
tmpfs                           tmpfs     118M     0  118M   0% /dev/shm
tmpfs                           tmpfs     118M  4.6M  113M   4% /run
tmpfs                           tmpfs     118M     0  118M   0% /sys/fs/cgroup
/dev/mapper/VolGroup00-LogVol00 xfs        38G  1.4G   37G   4% /
/dev/sda2                       xfs      1014M   86M  929M   9% /boot
vagrant                         vboxsf    477G  110G  367G  24% /vagrant
tmpfs                           tmpfs      24M     0   24M   0% /run/user/1000
```

–ü–æ–¥–≥–æ—Ç–æ–≤–∏–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–º –¥–ª—è / —Ä–∞–∑–¥–µ–ª–∞. –î–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–¥–∏–º Physical Volume (/dev/sdb), Volume Group (vg_root), Logical Volume (lv_root):

```
pvcreate /dev/sdb
vgcreate vg_root /dev/sdb
lvcreate -n lv_root -l +100%FREE /dev/vg_root
```

–°–æ–∑–¥–∞–µ–º –Ω–∞ lv_root —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∏ —Å–º–æ–Ω—Ç–∏—Ä—É–µ–º LV, —á—Ç–æ–±—ã –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç—É–¥–∞ –¥–∞–Ω–Ω—ã–µ:

```
mkfs.xfs /dev/vg_root/lv_root
mount /dev/vg_root/lv_root /mnt
```

–°–∫–æ–ø–∏—Ä—É–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å / —Ä–∞–∑–¥–µ–ª–∞ –≤ /mnt, —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã xfsdump:

```
xfsdump -J - /dev/VolGroup00/LogVol00 | xfsrestore -J - /mnt
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–π:
```
# lsblk
NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                       8:0    0   40G  0 disk 
‚îú‚îÄsda1                    8:1    0    1M  0 part 
‚îú‚îÄsda2                    8:2    0    1G  0 part /boot
‚îî‚îÄsda3                    8:3    0   39G  0 part 
  ‚îú‚îÄVolGroup00-LogVol00 253:0    0 37.5G  0 lvm  /
  ‚îî‚îÄVolGroup00-LogVol01 253:1    0  1.5G  0 lvm  [SWAP]
sdb                       8:16   0   10G  0 disk 
‚îî‚îÄvg_root-lv_root       253:2    0   10G  0 lvm  /mnt
sdc                       8:32   0    2G  0 disk 
sdd                       8:48   0    1G  0 disk 
sde                       8:64   0    1G  0 disk 

# df -hT
Filesystem                      Type      Size  Used Avail Use% Mounted on
devtmpfs                        devtmpfs  110M     0  110M   0% /dev
tmpfs                           tmpfs     118M     0  118M   0% /dev/shm
tmpfs                           tmpfs     118M  4.6M  113M   4% /run
tmpfs                           tmpfs     118M     0  118M   0% /sys/fs/cgroup
/dev/mapper/VolGroup00-LogVol00 xfs        38G  1.4G   37G   4% /
/dev/sda2                       xfs      1014M   86M  929M   9% /boot
vagrant                         vboxsf    477G  110G  367G  24% /vagrant
tmpfs                           tmpfs      24M     0   24M   0% /run/user/1000
/dev/mapper/vg_root-lv_root     xfs        10G   33M   10G   1% /mnt
```

–ü–µ—Ä–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º grub –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω–æ–≤—ã–π / (–ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ –ø–∞–ø–∫—É /mnt)

```
for i in /proc/ /sys/ /dev/ /run/ /boot/; do mount --bind $i /mnt/$i; done
chroot /mnt/
grub2-mkconfig -o /boot/grub2/grub.cfg
```

–û–±–Ω–æ–≤–∏–º –æ–±—Ä–∞–∑ initrd:

```
cd /boot ; for i in `ls initramfs-*img`; do dracut -v $i `echo $i|sed "s/initramfs-//g; s/.img//g"` --force; done
```

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±—ã–ª —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω—É–∂–Ω—ã–π /, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ —Ñ–∞–π–ª–µ
/boot/grub2/grub.cfg –∑–∞–º–µ–Ω–∏—Ç—å rd.lvm.lv=VolGroup00/LogVol00 –Ω–∞ rd.lvm.lv=vg_root/lv_root

–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º—Å—è —Å –Ω–æ–≤—ã–º / —Ç–æ–º–æ–º:
```
# lsblk
NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                       8:0    0   40G  0 disk 
‚îú‚îÄsda1                    8:1    0    1M  0 part 
‚îú‚îÄsda2                    8:2    0    1G  0 part /boot
‚îî‚îÄsda3                    8:3    0   39G  0 part 
  ‚îú‚îÄVolGroup00-LogVol01 253:1    0  1.5G  0 lvm  [SWAP]
  ‚îî‚îÄVolGroup00-LogVol00 253:2    0 37.5G  0 lvm  
sdb                       8:16   0   10G  0 disk 
‚îî‚îÄvg_root-lv_root       253:0    0   10G  0 lvm  /
sdc                       8:32   0    2G  0 disk 
sdd                       8:48   0    1G  0 disk 
sde                       8:64   0    1G  0 disk 

# df -hT
Filesystem                  Type      Size  Used Avail Use% Mounted on
devtmpfs                    devtmpfs  109M     0  109M   0% /dev
tmpfs                       tmpfs     118M     0  118M   0% /dev/shm
tmpfs                       tmpfs     118M  4.6M  113M   4% /run
tmpfs                       tmpfs     118M     0  118M   0% /sys/fs/cgroup
/dev/mapper/vg_root-lv_root xfs        10G  1.4G  8.7G  14% /
/dev/sda2                   xfs      1014M   86M  929M   9% /boot
/vagrant                    vboxsf    477G  110G  367G  24% /vagrant
tmpfs                       tmpfs      24M     0   24M   0% /run/user/1000
```

–ò–∑–º–µ–Ω–∏–º —Ä–∞–∑–º–µ—Ä —Å—Ç–∞—Ä–æ–π VG –∏ –≤–µ—Ä–Ω–µ–º –Ω–∞ –Ω–µ–≥–æ /. 
–î–ª—è —ç—Ç–æ–≥–æ —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π LV —Ä–∞–∑–º–µ—Ä–æ–≤ –≤ 40G –∏ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –Ω–∞ 8G:

```
lvremove /dev/VolGroup00/LogVol00
lvcreate -n VolGroup00/LogVol00 -L 8G /dev/VolGroup00
```

–°–æ–∑–¥–∞–µ–º –Ω–∞ –≤–Ω–æ–≤—å —Å–æ–∑–¥–∞–Ω–Ω–æ–º LV —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É, –º–æ–Ω—Ç–∏—Ä—É–µ–º –≤ /mnt, –ø–µ—Ä–µ–Ω–æ—Å–∏–º –¥–∞–Ω–Ω—ã–µ —Å /dev/vg_root/lv_root –≤ /mnt

```
mkfs.xfs /dev/VolGroup00/LogVol00
mount /dev/VolGroup00/LogVol00 /mnt
xfsdump -J - /dev/vg_root/lv_root | xfsrestore -J - /mnt
for i in /proc/ /sys/ /dev/ /run/ /boot/; do mount --bind $i /mnt/$i; done
```

–ü–æ–≤—Ç–æ—Ä—è–µ–º –¥–µ–π—Å—Ç–≤–∏—è —Å –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–º:

```
chroot /mnt/
grub2-mkconfig -o /boot/grub2/grub.cfg
cd /boot ; for i in `ls initramfs-*img`; do dracut -v $i `echo $i|sed "s/initramfs-//g;
s/.img//g"` --force; done
```
–ú–æ–∂–Ω–æ –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—è—Å—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥.

***–í—ã–¥–µ–ª–∏—Ç—å —Ç–æ–º –ø–æ–¥ /var –≤ –∑–µ—Ä–∫–∞–ª–æ***

–ù–∞ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –¥–∏—Å–∫–∞—Ö —Å–æ–∑–¥–∞–µ–º –∑–µ—Ä–∫–∞–ª–æ m1 (/dev/sdc, /dev/sdd):

```
pvcreate /dev/sdc /dev/sdd
vgcreate vg_var /dev/sdc /dev/sdd
lvcreate -L 950M -m1 -n lv_var vg_var
```
–°–æ–∑–¥–∞–µ–º –Ω–∞ –≤–Ω–æ–≤—å —Å–æ–∑–¥–∞–Ω–Ω–æ–º LV —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∏ –ø–µ—Ä–µ–º–µ—â–∞–µ–º —Ç—É–¥–∞ /var, –ø–æ—Å–ª–µ —á–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥ –º–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å:
```
mkfs.ext4 /dev/vg_var/lv_var
mount /dev/vg_var/lv_var /mnt
cp -aR /var/* /mnt/ 
```

–ú–æ–Ω—Ç–∏—Ä—É–µ–º –Ω–æ–≤—É—é var (/dev/vg_var/lv_var) –≤ –∫–∞—Ç–∞–ª–æ–≥ /var:

```
umount /mnt
mount /dev/vg_var/lv_var /var
```

–ü—Ä–∞–≤–∏–º fstab –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è /var:
```
echo "`blkid | grep var: | awk '{print $2}'` /var ext4 defaults 0 0" >> /etc/fstab
```

–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º—Å—è –≤ –Ω–æ–≤—É—é (—É–º–µ–Ω—å—à–µ–Ω–Ω—É—é root):

```
# lsblk
NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                       8:0    0   40G  0 disk 
‚îú‚îÄsda1                    8:1    0    1M  0 part 
‚îú‚îÄsda2                    8:2    0    1G  0 part /boot
‚îî‚îÄsda3                    8:3    0   39G  0 part 
  ‚îú‚îÄVolGroup00-LogVol01 253:1    0  1.5G  0 lvm  [SWAP]
  ‚îî‚îÄVolGroup00-LogVol00 253:2    0 37.5G  0 lvm  
sdb                       8:16   0   10G  0 disk 
‚îî‚îÄvg_root-lv_root       253:0    0   10G  0 lvm  /
sdc                       8:32   0    2G  0 disk 
sdd                       8:48   0    1G  0 disk 
sde                       8:64   0    1G  0 disk 

# df -hT
Filesystem                  Type      Size  Used Avail Use% Mounted on
devtmpfs                    devtmpfs  109M     0  109M   0% /dev
tmpfs                       tmpfs     118M     0  118M   0% /dev/shm
tmpfs                       tmpfs     118M  4.6M  113M   4% /run
tmpfs                       tmpfs     118M     0  118M   0% /sys/fs/cgroup
/dev/mapper/vg_root-lv_root xfs        10G  1.4G  8.7G  14% /
/dev/sda2                   xfs      1014M   86M  929M   9% /boot
/vagrant                    vboxsf    477G  110G  367G  24% /vagrant
tmpfs                       tmpfs      24M     0   24M   0% /run/user/1000
```

–£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é Volume Group:

```
lvremove /dev/vg_root/lv_root
vgremove /dev/vg_root
pvremove /dev/sdb
```

***–í—ã–¥–µ–ª–∏—Ç—å —Ç–æ–º –ø–æ–¥ /home, —Å–¥–µ–ª–∞—Ç—å —Ç–æ–º –¥–ª—è —Å–Ω–∞–ø—à–æ—Ç–æ–≤, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —Å–æ —Å–Ω–∞–ø—à–æ—Ç–∞***

–°–æ–∑–¥–∞–µ–º LV —Ä–∞–∑–º–µ—Ä–æ–º 2G, –Ω–∞ –Ω–µ–º —Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É xfs. 
–ú–æ–Ω—Ç–∏—Ä—É–µ–º LV –≤ –ø–∞–ø–∫—É /mnt –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–∞–ø–∫–∏ /home –Ω–∞ –Ω–æ–≤—ã–π LV.
–û—á–∏—â–∞–µ–º –ø–∞–ø–∫—É /home, –º–æ–Ω—Ç–∏—Ä—É–µ–º –Ω–æ–≤—ã–π LV –≤ –ø–∞–ø–∫—É /home.
```
lvcreate -n LogVol_Home -L 2G /dev/VolGroup00
mkfs.xfs /dev/VolGroup00/LogVol_Home
mount /dev/VolGroup00/LogVol_Home /mnt/
cp -aR /home/* /mnt/ 
rm -rf /home/*
umount /mnt
mount /dev/VolGroup00/LogVol_Home /home/
```

–ü—Ä–∞–≤–∏–º fstab –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è /home:

```
echo "`blkid | grep Home | awk '{print $2}'` /home xfs defaults 0 0" >> /etc/fstab
```

```
# cat /etc/fstab -T

#
# /etc/fstab
# Created by anaconda on Sat May 12 18:50:26 2018
#
# Accessible filesystems, by reference, are maintained under '/dev/disk'
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/VolGroup00-LogVol00 /                       xfs     defaults        0 0
UUID=570897ca-e759-4c81-90cf-389da6eee4cc /boot                   xfs     defaults        0 0
/dev/mapper/VolGroup00-LogVol01 swap                    swap    defaults        0 0
#VAGRANT-BEGIN
# The contents below are automatically generated by Vagrant. Do not modify.
vagrant /vagrant vboxsf uid=1000,gid=1000,_netdev 0 0
#VAGRANT-END
UUID="a14883b3-106b-438d-b5c9-a9984a9c5c6d" /var ext4 defaults 0 0
UUID="8ba87846-3bdb-4167-b123-475b3874ef8a" /home xfs defaults 0 0

```

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã –≤ /home/:

```
touch /home/file{1..20}
```

–°–Ω–∏–º–∞–µ–º —Å–Ω–∞–ø—à–æ—Ç (–æ–ø—Ü–∏—è -s):

```
lvcreate -L 100MB -s -n home_snap /dev/VolGroup00/LogVol_Home
```

–£–¥–∞–ª—è–µ–º —á–∞—Å—Ç—å —Ñ–∞–π–ª–æ–≤:

```
rm -f /home/file{11..20}
```

–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–∞–π–ª—ã —Å–æ —Å–Ω–∞–ø—à–æ—Ç–∞:

```
umount /home
lvconvert --merge /dev/VolGroup00/home_snap
mount /home
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
```
# lsblk
NAME                       MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                          8:0    0   40G  0 disk
‚îú‚îÄsda1                       8:1    0    1M  0 part
‚îú‚îÄsda2                       8:2    0    1G  0 part /boot
‚îî‚îÄsda3                       8:3    0   39G  0 part
  ‚îú‚îÄVolGroup00-LogVol00    253:0    0    8G  0 lvm  /
  ‚îú‚îÄVolGroup00-LogVol01    253:1    0  1.5G  0 lvm  [SWAP]
  ‚îî‚îÄVolGroup00-LogVol_Home 253:7    0    2G  0 lvm  /home
sdb                          8:16   0   10G  0 disk
sdc                          8:32   0    2G  0 disk
‚îú‚îÄvg_var-lv_var_rmeta_0    253:2    0    4M  0 lvm
‚îÇ ‚îî‚îÄvg_var-lv_var          253:6    0  952M  0 lvm  /var
‚îî‚îÄvg_var-lv_var_rimage_0   253:3    0  952M  0 lvm
  ‚îî‚îÄvg_var-lv_var          253:6    0  952M  0 lvm  /var
sdd                          8:48   0    1G  0 disk
‚îú‚îÄvg_var-lv_var_rmeta_1    253:4    0    4M  0 lvm
‚îÇ ‚îî‚îÄvg_var-lv_var          253:6    0  952M  0 lvm  /var
‚îî‚îÄvg_var-lv_var_rimage_1   253:5    0  952M  0 lvm
  ‚îî‚îÄvg_var-lv_var          253:6    0  952M  0 lvm  /var
sde                          8:64   0    1G  0 disk

# df -hT
Filesystem                         Type      Size  Used Avail Use% Mounted on
devtmpfs                           devtmpfs  109M     0  109M   0% /dev
tmpfs                              tmpfs     118M     0  118M   0% /dev/shm
tmpfs                              tmpfs     118M  4.5M  114M   4% /run
tmpfs                              tmpfs     118M     0  118M   0% /sys/fs/cgroup
/dev/mapper/VolGroup00-LogVol00    xfs       8.0G  1.4G  6.7G  18% /
/dev/sda2                          xfs      1014M   86M  929M   9% /boot
/dev/mapper/vg_var-lv_var          ext4      922M  188M  670M  22% /var
/vagrant                           vboxsf    477G  111G  366G  24% /vagrant
/dev/mapper/VolGroup00-LogVol_Home xfs       2.0G   33M  2.0G   2% /home
```